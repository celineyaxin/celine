# 科技外包的数据提取的处理
# 随机抽取行政处罚的数据判断情况
## filter_sample.py
* 随机抽取1000条内容看一下分类的结果
## outsourcing_filter.py
* 根据银行机构行政处罚的内容判断是否有外包相关的处罚

## filter_sample_complaints.py
* 随机抽取1000条内容看一下分类的结果
## outsourcing_complaints.py
* 根据银行收到的投诉文本的内容判断

## filter_bank_iip.py
* 通过整理好的银行的股票代码提取银行对应的互动易问答，对提问内容进行筛选

## check_keyword.py
* 通过关键词直接进行筛选判断
## bank_iip_sample.py
* 随机抽取

# 持牌机构的数据提取的处理
## LFI_Screening.py
* 原来针对筛选的是有贷款业务的金融类商家
* 我们补充提取了其余没有贷款业务的金融类商家**处理后的商家列表.xlsx**
* 根据简称判断是否是持牌金融机构，并给出置性度，然后再人工筛选
* 最后合并得到**持牌金融机构统计.xlsx**

## Marketing.py
* 筛选行政处罚数据，判断一下是否有营销问题的商家
### ExtractCompanyName.py
* 我们现在需要把样本中企业的全称和行政处罚的数据给匹配起来
* 提取单一的所属公司名称
* 手动筛选，删掉一些完全不属于我们样本的商家
### AddInformation.py
* 提取'被罚个人所属单位列表', '被罚单位名称列表'，'行政处罚决定书文号'这三列辅助后面的判断**机构名称频率统计_增强版.xlsx**
### NameComplete.py
* 调取api根据简称补充全称**机构名称全称匹配结果.xlsx**

## LiscenseComplaints.py
* 提取筛选出来的投诉对象对应的投诉内容
### UnmatchedMerchant_Confirmation.py
* 中国人寿财险专项服务/中联汇富资产管理有限公司 两个投诉对象没有匹配到对应的商家，找一下原因
### MerchantSupplement.py
* 有一些遗漏筛选的商家（根据投诉对象提取），我们通过关键词提取然后再次确认筛选
### LFI_Screening.py
* 通过api调取整理获得文件**新发现金融机构投诉对象.xlsx**
* 添加到持牌机构整理文件中再进行手工筛选，由于数据量大我们排除了只有一条投诉内容的商家**新发现金融机构分析结果.xlsx**
### Statistical.py
### FalseAds_Complaints_2019.py
* 调取api筛选出虚假宣传类的投诉内容
* 在这里我们主要看2019年的数据情况，可以check一下2019年中的投诉是否覆盖与政策相关的内容
* 根据输出结果调试prompt
### FalseAds_Complaints.py
公平交易/服务质量/催收行为

## DocumentMatching.py
* 行政处罚和投诉数据库匹配（注意处理括号的问题）
* 手动处理一些情况，对于一些名称有误的或者错别字的情况确认处理**文件中简称对应企业名称整理.xlsx**
### Fuzzymatching.py
* 对于未匹配到的商家模糊匹配检验一下是否有格式或者遗漏没有匹配到的情况
### Matching.py
* 提取匹配的商家，最后得到两个数据库匹配的列表
* 并根据匹配的商家全称提取简称获取最后的列表**匹配成功的持牌金融机构.xlsx** 
### PenByAbbr.py
* 根据简称在行政处罚数据库中提取我们样本企业的行政处罚记录**行政处罚记录_最终结果**
### Pen_2019.py
* 提取2019年对应的行政处罚记录
* 统计行政处罚的具体情况
### ConsumerPen.py
* 通过大语言模型辅助判断企业消费者权益侵犯类的行政处罚
#### ConsumerPen_2.py
* 针对2020——2024q1样本的筛选有一些遗漏的部分，原文件备份**行政处罚数据_分类结果_重试后_interrupted.xlsx**
* 在这份代码中对这部分内容进行了补充检验
* 并且需要合并到一个文件中**行政处罚数据_分类结果_重试后.xlsx**
#### ConsumerPen_sub.py
* 对消费者行为侵犯的子分类**行政处罚数据_完整分类结果.xlsx**

### PenSample.py
* 提取样本期内的处罚信息用于机制分析
### PenClassify.py
* 根据处罚的内容进行分类
### Pen_1719.py
* 合并2017-2019年的处罚情况（样本期前三年）

# 投诉数据分类
## RandomSample.py
* 随机抽取样本10000条投诉数据
* 先提取1000条测试结果
* 后面可以根据索引提取后面的文件
## model_classifier.py
* 写好提问以及分类的流程封装调取
## RunApi.py
* 根据抽取的1000条内容调取api运行
## MergedData.py
* 把分批分类的这些结果做一个合并
* 查看类别分布，调整任务分配
## Dataset_balancer.py
* 平衡数据样本
## TrainSplit.py
* 80%的样本用于训练
* 然后用于模型的训练，具体训练和预测的代码由于在服务器完成可以在server文件夹查看
## 提取投诉特征
### Feature.py
* 根据投诉编号提取投诉的特征（涉诉金额/商家回复时间计算回复时长/投诉进度）
### Feature_time.py
* 提取所需的发起投诉事件的内容

## 合并类别再训练
### Dataset_balancer_2.py
### TrainSplit_2.py


**######** 数据库里是否有银行或者是上市金融类企业的招聘 **######**
* 上市金融类企业涉及的业务范围以及投资者范围的差别太大
* 地区该银行的分支机构占比越少，投诉处理的越快，投诉越少
* 银行投诉中科技相关的投诉

